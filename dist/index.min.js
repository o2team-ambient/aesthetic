!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.ATAmbient=e()}(this,function(){"use strict";!function(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}}('@charset "UTF-8";\n/* 自定义样式 */\n.o2team_ambient_main {\n  z-index: 999;\n  pointer-events: none; }\n');var t="aesthetic",e=t.toUpperCase(),n="O2_AMBIENT_".concat(e,"_MAIN"),i="O2_AMBIENT_".concat(e,"_INIT"),r="O2_AMBIENT_".concat(e,"_CONFIG"),o="o2_ambient_".concat(t);function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function u(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),t}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}!function(){for(var o=0,t=["ms","moz","webkit","o"],e=0;e<t.length&&!window.requestAnimationFrame;++e)window.requestAnimationFrame=window["".concat(t[e],"RequestAnimationFrame")],window.cancelAnimationFrame=window["".concat(t[e],"CancelAnimationFrame")]||window["".concat(t[e],"CancelRequestAnimationFrame")];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,e){var n=(new Date).getTime(),i=Math.max(0,16-(n-o)),r=window.setTimeout(function(){t(n+i)},i);return o=n+i,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}();var w=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},f="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function d(t,e){return t(e={exports:{}},e.exports),e.exports}var v="object"==typeof f&&f&&f.Object===Object&&f,p="object"==typeof self&&self&&self.Object===Object&&self,y=v||p||Function("return this")(),m=function(){return y.Date.now()},b=y.Symbol,g=Object.prototype,j=g.hasOwnProperty,x=g.toString,O=b?b.toStringTag:void 0;var A=function(t){var e=j.call(t,O),n=t[O];try{t[O]=void 0}catch(t){}var i=x.call(t);return e?t[O]=n:delete t[O],i},k=Object.prototype.toString;var T=function(t){return k.call(t)},C=b?b.toStringTag:void 0;var M=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":C&&C in Object(t)?A(t):T(t)};var P=function(t){return null!=t&&"object"==typeof t};var _=function(t){return"symbol"==typeof t||P(t)&&"[object Symbol]"==M(t)},S=/^\s+|\s+$/g,E=/^[-+]0x[0-9a-f]+$/i,F=/^0b[01]+$/i,I=/^0o[0-7]+$/i,B=parseInt;var N=function(t){if("number"==typeof t)return t;if(_(t))return NaN;if(w(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=w(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(S,"");var n=F.test(t);return n||I.test(t)?B(t.slice(2),n?2:8):E.test(t)?NaN:+t},R=Math.max,z=Math.min;var q=function(i,n,t){var r,o,a,s,u,c,h=0,l=!1,f=!1,e=!0;if("function"!=typeof i)throw new TypeError("Expected a function");function d(t){var e=r,n=o;return r=o=void 0,h=t,s=i.apply(n,e)}function v(t){var e=t-c;return void 0===c||n<=e||e<0||f&&a<=t-h}function p(){var t=m();if(v(t))return y(t);u=setTimeout(p,function(t){var e=n-(t-c);return f?z(e,a-(t-h)):e}(t))}function y(t){return u=void 0,e&&r?d(t):(r=o=void 0,s)}function b(){var t=m(),e=v(t);if(r=arguments,o=this,c=t,e){if(void 0===u)return function(t){return h=t,u=setTimeout(p,n),l?d(t):s}(c);if(f)return u=setTimeout(p,n),d(c)}return void 0===u&&(u=setTimeout(p,n)),s}return n=N(n)||0,w(t)&&(l=!!t.leading,a=(f="maxWait"in t)?R(N(t.maxWait)||0,n):a,e="trailing"in t?!!t.trailing:e),b.cancel=function(){void 0!==u&&clearTimeout(u),r=c=o=u=void(h=0)},b.flush=function(){return void 0===u?s:y(m())},b};function D(t,e){return Math.random()*(e-t)+t}var H=function(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t};var U=function(u){return function(t,e,n){for(var i=-1,r=Object(t),o=n(t),a=o.length;a--;){var s=o[u?a:++i];if(!1===e(r[s],s,r))break}return t}}();var W=function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i};var $=function(t){return P(t)&&"[object Arguments]"==M(t)},L=Object.prototype,G=L.hasOwnProperty,V=L.propertyIsEnumerable,J=$(function(){return arguments}())?$:function(t){return P(t)&&G.call(t,"callee")&&!V.call(t,"callee")},K=Array.isArray;var Q=function(){return!1},X=d(function(t,e){var n=e&&!e.nodeType&&e,i=n&&t&&!t.nodeType&&t,r=i&&i.exports===n?y.Buffer:void 0,o=(r?r.isBuffer:void 0)||Q;t.exports=o}),Y=/^(?:0|[1-9]\d*)$/;var Z=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&Y.test(t))&&-1<t&&t%1==0&&t<e};var tt=function(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=9007199254740991},et={};et["[object Float32Array]"]=et["[object Float64Array]"]=et["[object Int8Array]"]=et["[object Int16Array]"]=et["[object Int32Array]"]=et["[object Uint8Array]"]=et["[object Uint8ClampedArray]"]=et["[object Uint16Array]"]=et["[object Uint32Array]"]=!0,et["[object Arguments]"]=et["[object Array]"]=et["[object ArrayBuffer]"]=et["[object Boolean]"]=et["[object DataView]"]=et["[object Date]"]=et["[object Error]"]=et["[object Function]"]=et["[object Map]"]=et["[object Number]"]=et["[object Object]"]=et["[object RegExp]"]=et["[object Set]"]=et["[object String]"]=et["[object WeakMap]"]=!1;var nt=function(t){return P(t)&&tt(t.length)&&!!et[M(t)]};var it=function(e){return function(t){return e(t)}},rt=d(function(t,e){var n=e&&!e.nodeType&&e,i=n&&t&&!t.nodeType&&t,r=i&&i.exports===n&&v.process,o=function(){try{var t=i&&i.require&&i.require("util").types;return t||r&&r.binding&&r.binding("util")}catch(t){}}();t.exports=o}),ot=rt&&rt.isTypedArray,at=ot?it(ot):nt,st=Object.prototype.hasOwnProperty;var ut=function(t,e){var n=K(t),i=!n&&J(t),r=!n&&!i&&X(t),o=!n&&!i&&!r&&at(t),a=n||i||r||o,s=a?W(t.length,String):[],u=s.length;for(var c in t)!e&&!st.call(t,c)||a&&("length"==c||r&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Z(c,u))||s.push(c);return s},ct=Object.prototype;var ht=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||ct)};var lt=function(e,n){return function(t){return e(n(t))}}(Object.keys,Object),ft=Object.prototype.hasOwnProperty;var dt=function(t){if(!ht(t))return lt(t);var e=[];for(var n in Object(t))ft.call(t,n)&&"constructor"!=n&&e.push(n);return e};var vt=function(t){if(!w(t))return!1;var e=M(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e};var pt=function(t){return null!=t&&tt(t.length)&&!vt(t)};var yt=function(t){return pt(t)?ut(t):dt(t)};var bt=function(o,a){return function(t,e){if(null==t)return t;if(!pt(t))return o(t,e);for(var n=t.length,i=a?n:-1,r=Object(t);(a?i--:++i<n)&&!1!==e(r[i],i,r););return t}}(function(t,e){return t&&U(t,e,yt)});var wt=function(t){return t};var mt=function(t){return"function"==typeof t?t:wt};var gt=function(t,e){return(K(t)?H:bt)(t,mt(e))},jt=function(){function t(){a(this,t)}return u(t,[{key:"initDOM",value:function(){var t=this.createCanvas(),e=this.createCanvas();this.setCanvasStyle(t),this.setCanvasStyle(e),this.canvas1=t,this.canvas2=e,this.ctx1=t.getContext("2d"),this.ctx2=e.getContext("2d"),this.parent.appendChild(e)}},{key:"createCanvas",value:function(){var t=document.createElement("canvas"),e=this.devicePixelRatio;return this.setCanvasStyle(t,{position:"fixed",left:0,top:0,width:"".concat(this.width/e,"px"),height:"".concat(this.height/e,"px"),zIndex:-1,pointerEvents:"none"}),t.className=this.className,t.width=this.width,t.height=this.height,t}},{key:"setCanvasStyle",value:function(n,t){gt(t,function(t,e){n.style[e]=t})}},{key:"initFPS",value:function(){this.INTERVAL=1e3/this.FPS,this.nextTime=Date.now(),this.startTime=this.nextTime}},{key:"play",value:function(){this.isPaused=!1,cancelAnimationFrame(this.rafId),this.loop()}},{key:"pause",value:function(){this.isPaused=!0}},{key:"stop",value:function(){cancelAnimationFrame(this.rafId),this.pause()}},{key:"toggle",value:function(){this.isPaused?this.play():this.pause()}},{key:"destory",value:function(){this.stop(),this.unbindEvents(),this.parent.removeChild(this.canvas)}}]),t}(),xt=function(t){function e(){var t;return a(this,e),(t=l(this,c(e).call(this))).devicePixelRatio=1,t.isPaused=!1,t.isInited=!1,t.reset(),t.initFPS(),t.initDOM(),t.bindEvents(),t.init(),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(e,jt),u(e,[{key:"init",value:function(){this.isInited=!0,this.create()}},{key:"create",value:function(){this.draw=this.drawDefault,this.addParticles(),this.play()}},{key:"reset",value:function(){this.width=window.innerWidth*this.devicePixelRatio,this.height=window.innerHeight*this.devicePixelRatio,this.parent=document.querySelector(".o2team_ambient_main"),this.FPS=30,this.sizeBase=this.width+this.height,this.count=Math.floor(.3*this.sizeBase),this.backgroundColor=window[r].backgroundColor,this.hue=D(0,360),this.saturation=D(0,40),this.alpha=window[r].alpha||.1,this.option={backgroundColor:this.backgroundColor,radiusMin:1,radiusMax:.04*this.sizeBase,blurMin:10,blurMax:.04*this.sizeBase,hueMin:this.hue,hueMax:this.hue+100,saturationMin:this.saturation,saturationMax:this.saturation+60,lightnessMin:20,lightnessMax:50,alphaMin:this.alpha,alphaMax:this.alpha+.4,density:window[r].density||3,radius:window[r].radius||3},this.className=o,this.isInited&&this.create()}},{key:"bindEvents",value:function(){this.windowResizeHandleSelf=q(this.windowResizeHandle.bind(this),300),window.addEventListener("resize",this.windowResizeHandleSelf,!1)}},{key:"unbindEvents",value:function(){window.removeEventListener("resize",this.windowResizeHandleSelf,!1)}},{key:"windowResizeHandle",value:function(t){var e=this.devicePixelRatio;this.width=window.innerWidth*e,this.height=window.innerHeight*e,this.canvas2.width=this.canvas1.width=this.width,this.canvas2.height=this.canvas1.height=this.height,this.canvas2.style.width=this.canvas1.style.width="".concat(this.width/e,"px"),this.canvas2.style.height=this.canvas1.style.height="".concat(this.height/e,"px"),this.reset()}},{key:"renderBgCanvas",value:function(){var t=this.ctx1,e=this.option;t.clearRect(0,0,this.width,this.height),this.setCanvasStyle(this.canvas2,{backgroundColor:e.backgroundColor})}},{key:"addParticles",value:function(){for(var t=[],e=this.option,n=e.density,i=e.radius,r=Math.floor(.01*this.sizeBase*n),o=0;o<r;o++)t.push({radius:D(1,.01*this.sizeBase*i),x:D(0,this.width),y:D(0,this.height),angle:D(0,2*Math.PI),vel:D(.1,.5),tick:D(0,1e4)});this.particles=t}},{key:"drawDefault",value:function(){var n=this,i=this.ctx2;i.clearRect(0,0,this.width,this.height),i.globalCompositeOperation="source-over",i.shadowBlur=0,i.drawImage(this.canvas1,0,0),i.globalCompositeOperation="lighter",i.shadowBlur=15,i.shadowColor="#fff",this.particles.forEach(function(t,e){t.x+=Math.cos(t.angle)*t.vel,t.y+=Math.sin(t.angle)*t.vel,t.angle+=D(-.05,.05),i.beginPath(),i.arc(t.x,t.y,t.radius,0,2*Math.PI,!1),i.fillStyle=function(t,e,n,i){return"hsla("+t+","+e+"%,"+n+"%,"+i+")"}(0,0,100,.075+.05*Math.cos(.02*t.tick)),i.fill(),t.x-t.radius>n.width&&(t.x=-t.radius),t.x+t.radius<0&&(t.x=n.width+t.radius),t.y-t.radius>n.height&&(t.y=-t.radius),t.y+t.radius<0&&(t.y=n.height+t.radius),t.tick++})}},{key:"loop",value:function(){this.rafId=requestAnimationFrame(this.loop.bind(this)),this.isPaused||(this.ctx2.clearRect(0,0,this.width,this.height),this.draw())}}]),e}(),Ot=document.querySelector(".o2team_ambient_main");function At(){var t=new xt;window[n]=t}return Ot||((Ot=document.createElement("div")).setAttribute("class","o2team_ambient_main"),Ot.setAttribute("id","o2team_ambient_main"),document.body.insertAdjacentElement("beforeend",Ot)),window[i]=At,window[r]={density:3,radius:3},function(e){e&&Object.keys(window[r]).forEach(function(t){void 0!==e[t]&&(window[r][t]=e[t])}),At()}});
//# sourceMappingURL=index.min.js.map
